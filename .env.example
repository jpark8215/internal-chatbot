# Copy this file to .env and fill in secrets before running locally.
# Do NOT commit your real .env to version control.

## Database
# Postgres connection string used by the API (format: postgres://user:pass@host:port/dbname)
# If using Docker Compose DB service
# DATABASE_URL=postgres://postgres:postgres@db:5432/internal_chatbot
# If using a locally exposed DB port (uncomment instead)
DATABASE_URL=postgres://postgres:postgres@localhost:5432/internal_chatbot

## Azure (for Azure OpenAI or AD auth)
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=
AZURE_TENANT_ID=
# If using Azure OpenAI (optional)
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_KEY=

## OpenAI (if using OpenAI directly instead of Azure)
OPENAI_API_KEY=
OPENAI_BASE=
OPENAI_API_TYPE=azure_or_openai
OPENAI_API_VERSION=

## Embeddings / Models
# Embedding model used for pgvector search (Ollama)
EMBEDDING_MODEL=nomic-embed-text:latest
EMBEDDING_DIM=768

## pgvector settings
PGVECTOR_EXTENSION=vector
PGVECTOR_DIM=768

## API / App settings
FASTAPI_HOST=0.0.0.0
FASTAPI_PORT=8000
LOG_LEVEL=info
SECRET_KEY=changeme
ADMIN_API_KEY=changeme

## Local LLM (Ollama)
# Configure the local Ollama model and host used by the API
DEFAULT_MODEL=mistral:7b
OLLAMA_HOST=http://localhost:11434

# Auto-ingest on startup 
AUTO_INGEST_ON_START=true
AUTO_INGEST_PATH=C:\Users\jpark\Desktop\ChatbotFiles

# File watching for automatic ingestion
AUTO_INGEST_WATCH_MODE=true
AUTO_INGEST_WATCH_INTERVAL=600

## Caching / Queues 
REDIS_URL=redis://redis:6379/0

# Response Caching
CACHE_MAX_SIZE=10000
CACHE_TTL_SECONDS=7200
ENABLE_RESPONSE_CACHE=true

# Additional Caching
ENABLE_EMBEDDING_CACHE=true
EMBEDDING_CACHE_SIZE=2000
ENABLE_QUERY_RESULT_CACHE=true
QUERY_RESULT_CACHE_TTL=300

# Performance Tuning (Optimized for High Performance)
EMBEDDING_BATCH_SIZE=50
MAX_CONCURRENT_REQUESTS=20
DATABASE_POOL_SIZE=100
DATABASE_MAX_OVERFLOW=200

## Monitoring / Sentry 
SENTRY_DSN=

# Speed optimizations (Balanced for Speed + Accuracy)
ENABLE_FAST_MODE=true
SKIP_QUALITY_INDICATORS=false  # Keep enabled for accuracy monitoring
ENABLE_QUERY_PARALLELIZATION=true
DATABASE_QUERY_TIMEOUT=3
LLM_GENERATION_TIMEOUT=15

## Misc
# Keep this set to true only for local development
DEBUG=true
